<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Federal Estate Tax Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        /* Custom Range Slider Styling */
        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            margin-top: -8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 2px;
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                color: black;
            }

            .no-print {
                display: none !important;
            }

            .shadow-md,
            .shadow-sm,
            .shadow-lg {
                box-shadow: none !important;
            }

            input,
            select {
                border: none !important;
                background: transparent !important;
                appearance: none;
                padding: 0;
            }

            .bg-slate-50 {
                background-color: white !important;
            }

            header {
                border-bottom: 2px solid black;
                color: black !important;
                background: white !important;
            }

            header h1 {
                color: black !important;
            }

            header svg {
                color: black !important;
            }
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-800 min-h-screen pb-12">

    <!-- Header -->
    <header class="bg-slate-900 text-white p-6 shadow-md print:bg-white print:text-black">
        <div class="max-w-4xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <svg class="w-8 h-8 text-emerald-400 print:text-black" fill="none" stroke="currentColor"
                    viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 7h6m0 3.666A5.976 5.976 0 013 12a5.976 5.976 0 0113.818-4.218A5.976 5.976 0 0121 12a5.976 5.976 0 01-11.818 4.218 5.976 5.976 0 013.257-9.351z">
                    </path>
                </svg>
                <div>
                    <h1 class="text-2xl font-bold tracking-tight">Federal Estate Tax Calculator</h1>
                    <p class="text-slate-400 text-sm print:text-slate-600">Estimate your potential tax liability (2025
                        Figures)</p>
                </div>
            </div>
            <button onclick="window.print()"
                class="no-print bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z">
                    </path>
                </svg>
                Save Report
            </button>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-6 grid grid-cols-1 lg:grid-cols-3 gap-8">

        <!-- Left Column: Inputs -->
        <div class="lg:col-span-2 space-y-6">

            <!-- Configuration -->
            <section class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <h2 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                    <span
                        class="bg-emerald-100 text-emerald-800 text-xs font-bold px-2 py-1 rounded mr-2 uppercase">Step
                        1</span>
                    Filing Status
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-600 mb-1">Marital Status</label>
                        <select id="status" onchange="calculate()"
                            class="w-full border-slate-300 rounded-md shadow-sm focus:border-emerald-500 focus:ring-emerald-500 p-2 border bg-white">
                            <option value="single">Single / Individual</option>
                            <option value="married">Married (Joint)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-600 mb-1">Exemption Amount (2025
                            Est.)</label>
                        <div class="w-full p-2 bg-slate-100 border border-slate-200 rounded-md text-slate-500 font-mono"
                            id="exemption-display">$13,990,000</div>
                    </div>
                </div>
                <p class="text-xs text-slate-500 mt-3">
                    *The 2025 federal estate tax exemption is estimated at roughly $13.99M per person. Married couples
                    can combine this for ~$27.98M (Portability).
                </p>
            </section>

            <!-- Assets -->
            <section class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <h2 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                    <span
                        class="bg-emerald-100 text-emerald-800 text-xs font-bold px-2 py-1 rounded mr-2 uppercase">Step
                        2</span>
                    Your Assets (Approximate Value)
                </h2>

                <div class="space-y-4">
                    <!-- Real Estate -->
                    <div>
                        <div class="flex justify-between mb-1">
                            <label class="text-sm font-medium text-slate-700">Real Estate</label>
                            <span class="text-sm font-bold text-emerald-700" id="val-realestate">$0</span>
                        </div>
                        <input type="range" min="0" max="20000000" step="50000" value="0" id="in-realestate"
                            oninput="updateVal('realestate', this.value)"
                            class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-slate-400 mt-1">
                            <span>$0</span>
                            <span>$20M+</span>
                        </div>
                    </div>

                    <!-- Investments -->
                    <div>
                        <div class="flex justify-between mb-1">
                            <label class="text-sm font-medium text-slate-700">Investments & Cash</label>
                            <span class="text-sm font-bold text-emerald-700" id="val-invest">$0</span>
                        </div>
                        <input type="range" min="0" max="20000000" step="50000" value="0" id="in-invest"
                            oninput="updateVal('invest', this.value)"
                            class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                    </div>

                    <!-- Retirement -->
                    <div>
                        <div class="flex justify-between mb-1">
                            <label class="text-sm font-medium text-slate-700">Retirement Accounts (401k/IRA)</label>
                            <span class="text-sm font-bold text-emerald-700" id="val-retirement">$0</span>
                        </div>
                        <input type="range" min="0" max="10000000" step="50000" value="0" id="in-retirement"
                            oninput="updateVal('retirement', this.value)"
                            class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                    </div>

                    <!-- Business -->
                    <div>
                        <div class="flex justify-between mb-1">
                            <label class="text-sm font-medium text-slate-700">Business Interests</label>
                            <span class="text-sm font-bold text-emerald-700" id="val-business">$0</span>
                        </div>
                        <input type="range" min="0" max="30000000" step="100000" value="0" id="in-business"
                            oninput="updateVal('business', this.value)"
                            class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                    </div>

                    <!-- Life Insurance -->
                    <div>
                        <div class="flex justify-between mb-1">
                            <label class="text-sm font-medium text-slate-700">Life Insurance (Death Benefit)</label>
                            <span class="text-sm font-bold text-emerald-700" id="val-insurance">$0</span>
                        </div>
                        <input type="range" min="0" max="10000000" step="50000" value="0" id="in-insurance"
                            oninput="updateVal('insurance', this.value)"
                            class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                        <p class="text-xs text-slate-400 mt-1">Note: Life insurance proceeds are typically included in
                            your taxable estate unless held in an ILIT.</p>
                    </div>
                </div>
            </section>

            <!-- Liabilities -->
            <section class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                <h2 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                    <span class="bg-red-100 text-red-800 text-xs font-bold px-2 py-1 rounded mr-2 uppercase">Step
                        3</span>
                    Liabilities
                </h2>

                <div>
                    <div class="flex justify-between mb-1">
                        <label class="text-sm font-medium text-slate-700">Mortgages & Debts</label>
                        <span class="text-sm font-bold text-red-600" id="val-debt">$0</span>
                    </div>
                    <input type="range" min="0" max="10000000" step="50000" value="0" id="in-debt"
                        oninput="updateVal('debt', this.value)"
                        class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                </div>
            </section>

        </div>

        <!-- Right Column: Results -->
        <div class="lg:col-span-1">
            <div class="sticky top-6 space-y-6">

                <!-- Summary Card -->
                <div
                    class="bg-slate-900 text-white rounded-xl shadow-lg p-6 print:bg-white print:text-black print:border print:border-black">
                    <h3 class="text-sm font-medium text-slate-400 uppercase tracking-wider mb-4 print:text-black">
                        Estimated Results</h3>

                    <!-- Gross Estate -->
                    <div class="flex justify-between items-end mb-2">
                        <span class="text-slate-300 text-sm print:text-slate-600">Gross Estate</span>
                        <span class="font-bold text-lg" id="res-gross">$0</span>
                    </div>

                    <!-- Debts -->
                    <div
                        class="flex justify-between items-end mb-4 pb-4 border-b border-slate-700 print:border-slate-300">
                        <span class="text-slate-300 text-sm print:text-slate-600">Total Debts</span>
                        <span class="font-bold text-lg text-red-400 print:text-red-600" id="res-debt">-$0</span>
                    </div>

                    <!-- Net Estate -->
                    <div class="flex justify-between items-end mb-6">
                        <span class="text-emerald-400 font-medium print:text-black">Net Estate Value</span>
                        <span class="font-bold text-2xl text-emerald-400 print:text-black" id="res-net">$0</span>
                    </div>

                    <!-- Tax Calculation Block -->
                    <div class="bg-slate-800 rounded-lg p-4 print:bg-slate-100 print:text-black">
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-slate-400 print:text-slate-600">Taxable Amount</span>
                            <span class="font-medium" id="res-taxable">$0</span>
                        </div>
                        <div class="flex justify-between text-sm mb-3 pb-3 border-b border-slate-700">
                            <span class="text-slate-400 print:text-slate-600">Est. Tax Rate</span>
                            <span class="font-medium">40%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-white print:text-black">Est. Federal Tax</span>
                            <span class="font-bold text-xl text-red-400 print:text-red-600" id="res-final-tax">$0</span>
                        </div>
                    </div>

                    <!-- Status Indicator -->
                    <div class="mt-6 text-center" id="status-message">
                        <!-- JS will inject status here -->
                    </div>
                </div>

                <!-- Visual Meter -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 print:hidden">
                    <h4 class="font-bold text-slate-800 mb-4">Exemption Usage</h4>
                    <div class="relative h-6 bg-slate-100 rounded-full overflow-hidden mb-2">
                        <div id="progress-bar"
                            class="absolute top-0 left-0 h-full bg-emerald-500 transition-all duration-500"
                            style="width: 0%"></div>
                        <!-- Limit Line -->
                        <div class="absolute top-0 bottom-0 w-0.5 bg-black z-10 opacity-20" style="left: 100%"></div>
                    </div>
                    <div class="flex justify-between text-xs text-slate-500">
                        <span>$0</span>
                        <span id="meter-limit-label">$13.99M Limit</span>
                    </div>
                    <p class="text-xs text-slate-400 mt-4 leading-relaxed">
                        This meter visualizes how much of your federal exemption you have used. If the bar fills
                        completely, the excess is subject to federal estate tax.
                    </p>
                </div>

            </div>
        </div>

    </main>

    <!-- Disclaimer Footer -->
    <footer class="max-w-4xl mx-auto px-6 py-8 text-center text-slate-400 text-xs">
        <p class="mb-2">
            <strong>Disclaimer:</strong> This calculator provides a simplified estimate for educational purposes only.
            It assumes a flat 40% tax rate on the taxable estate and uses estimated 2025 exemption figures.
            Actual tax liability involves complex factors including past gifts, state-specific estate taxes, and
            specific deductions.
        </p>
        <p>Consult with a qualified estate planning attorney or CPA for an accurate assessment.</p>
    </footer>

    <script>
        // Constants
        const EXEMPTION_SINGLE_2025 = 13990000;
        const EXEMPTION_MARRIED_2025 = 27980000;
        const TAX_RATE = 0.40;

        function formatCurrency(num) {
            return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(num);
        }

        function updateVal(id, value) {
            const numVal = parseInt(value);
            document.getElementById('val-' + id).innerText = formatCurrency(numVal);
            calculate();
        }

        function calculate() {
            // 1. Get Status
            const status = document.getElementById('status').value;
            const currentExemption = status === 'married' ? EXEMPTION_MARRIED_2025 : EXEMPTION_SINGLE_2025;

            // Update Exemption Text
            document.getElementById('exemption-display').innerText = formatCurrency(currentExemption);
            document.getElementById('meter-limit-label').innerText = (currentExemption / 1000000).toFixed(2) + "M Limit";

            // 2. Sum Assets
            const realestate = parseInt(document.getElementById('in-realestate').value) || 0;
            const invest = parseInt(document.getElementById('in-invest').value) || 0;
            const retirement = parseInt(document.getElementById('in-retirement').value) || 0;
            const business = parseInt(document.getElementById('in-business').value) || 0;
            const insurance = parseInt(document.getElementById('in-insurance').value) || 0;

            const grossEstate = realestate + invest + retirement + business + insurance;

            // 3. Subtract Debts
            const debt = parseInt(document.getElementById('in-debt').value) || 0;
            const netEstate = Math.max(0, grossEstate - debt);

            // 4. Calculate Tax
            let taxableAmount = 0;
            let estimatedTax = 0;

            if (netEstate > currentExemption) {
                taxableAmount = netEstate - currentExemption;
                estimatedTax = taxableAmount * TAX_RATE;
            }

            // 5. Update UI
            document.getElementById('res-gross').innerText = formatCurrency(grossEstate);
            document.getElementById('res-debt').innerText = "-" + formatCurrency(debt);
            document.getElementById('res-net').innerText = formatCurrency(netEstate);
            document.getElementById('res-taxable').innerText = formatCurrency(taxableAmount);
            document.getElementById('res-final-tax').innerText = formatCurrency(estimatedTax);

            // 6. Update Meter
            const percentage = Math.min(100, (netEstate / currentExemption) * 100);
            const bar = document.getElementById('progress-bar');
            bar.style.width = percentage + "%";

            // Color logic for meter
            if (taxableAmount > 0) {
                bar.classList.remove('bg-emerald-500');
                bar.classList.add('bg-red-500');
            } else if (percentage > 80) {
                bar.classList.remove('bg-emerald-500', 'bg-red-500');
                bar.classList.add('bg-yellow-500');
            } else {
                bar.classList.remove('bg-red-500', 'bg-yellow-500');
                bar.classList.add('bg-emerald-500');
            }

            // 7. Status Message
            const msgDiv = document.getElementById('status-message');
            if (taxableAmount > 0) {
                msgDiv.innerHTML = `
                    <div class="inline-flex items-center px-3 py-1 rounded-full bg-red-900/50 text-red-200 text-sm font-medium border border-red-700">
                        ⚠️ Above Federal Limit
                    </div>
                    <p class="text-xs text-slate-400 mt-2">You may benefit from advanced planning strategies like ILITs or FLPs.</p>
                `;
            } else {
                msgDiv.innerHTML = `
                    <div class="inline-flex items-center px-3 py-1 rounded-full bg-emerald-900/50 text-emerald-200 text-sm font-medium border border-emerald-700">
                        ✅ Within Federal Limit
                    </div>
                `;
            }
        }

        // Init
        calculate();
    </script>
</body>

</html>